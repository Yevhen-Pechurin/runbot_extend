<odoo>
  <data>

     <record id="config_step_form" model="ir.ui.view">
        <field name="model">runbot.build.config.step</field>
         <field name="inherit_id" ref="runbot.config_step_form"/>
        <field name="arch" type="xml">
            <form string="Build config step">
                <sheet>
                    <div t-att-class="label label-warning" attrs="{'invisible': [('protected', '=', False)]}">
                        This record is protected and can only be edited by config administrator.
                    </div>
                    <group string="General settings">
                        <field name="name"/>
                        <field name="domain_filter"/>
                        <field name="job_type"/>
                        <field name="make_stats"/>
                        <field name="protected" groups="base.group_no_one"/>
                        <field name="default_sequence" groups="base.group_no_one"/>
                        <field name="group" groups="base.group_no_one"/>
                    </group>
                    <group string="Stats regexes" attrs="{'invisible': [('make_stats', '=', False)]}">
                      <field name="build_stat_regex_ids">
                          <tree string="Regexes" editable="bottom">
                              <field name="name"/>
                              <field name="regex"/>
                              <field name="description"/>
                          </tree>
                      </field>
                    </group>
                    <group string="Python settings" attrs="{'invisible': [('job_type', 'not in', ('python'))]}">
                        <field name="python_code" widget="ace" options="{'mode': 'python'}"/>
                        <field name="python_result_code" widget="ace" options="{'mode': 'python'}"/>
                        <field name="running_job"/>
                        <field name="ignore_triggered_result"/>
                    </group>
                    <group string="Test settings" attrs="{'invisible': [('job_type', 'not in', ('python', 'install_odoo'))]}">
                        <field name="create_db" groups="base.group_no_one"/>
                        <field name="install_modules"/>
                        <field name="db_name" groups="base.group_no_one"/>
                        <field name="cpu_limit" groups="base.group_no_one"/>
                        <field name="coverage"/>
                        <field name="paths_to_omit" attrs="{'invisible': [('coverage', '!=', True)]}"/>
                        <field name="test_enable"/>
                        <field name="test_tags"/>
                        <field name="enable_auto_tags"/>
                        <field name="sub_command"/>
                    </group>
                    <group string="Extra Parameters" attrs="{'invisible': [('job_type', 'not in', ('python', 'install_odoo', 'test_upgrade', 'run_odoo'))]}">
                        <field name="extra_params"/>
                        <field name="additionnal_env"/>
                        <field name="config_path"/>
                    </group>
                    <group string="Create settings" attrs="{'invisible': [('job_type', 'not in', ('python', 'create_build'))]}">
                        <field name="create_config_ids" widget="many2many_tags" options="{'no_create': True}" />
                        <field name="number_builds"/>
                        <field name="make_orphan"/>
                    </group>
                    <group attrs="{'invisible': [('job_type', 'not in', ('python', 'configure_upgrade'))]}">
                      <group class="col" string="Target version settings">
                        <field string="Current" name="upgrade_to_current"/>
                        <field string="Master" name="upgrade_to_master"/>
                        <field string="Major" name="upgrade_to_major_versions"/>
                        <field string="All saas" name="upgrade_to_all_versions"/>
                        <field string="Explicit list" name="upgrade_to_version_ids" widget="many2many_tags"/>
                      </group>
                      <group class="col" string="Source version settings">
                        <field string="Major" name="upgrade_from_previous_major_version"/>
                        <field string="Last saas" name="upgrade_from_last_intermediate_version"/>
                        <field string="All saas" name="upgrade_from_all_intermediate_version"/>
                        <field string="Explicit list" name="upgrade_from_version_ids" widget="many2many_tags"/>
                      </group>
                      <group string="Upgrade settings" class="o_group_col_12">
                        <field name="upgrade_flat"/>
                        <field name="upgrade_config_id"/>
                        <field string="Db to upgrade" name="upgrade_dbs">
                          <tree editable="bottom">
                              <field name="config_id"/>
                              <field name="db_pattern"/>
                              <field name="min_target_version_id"/>
                          </tree>
                        </field>
                      </group>
                    </group>
                    <group string="Restore settings" attrs="{'invisible': [('job_type', '!=', 'restore')]}">
                        <field name="restore_download_db_suffix"/>
                        <field name="restore_rename_db_suffix"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>

  </data>
</odoo>
